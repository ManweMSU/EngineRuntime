<html>
    <head>
        <meta charset="UTF-8">
        <title>Спецификация языка Engine Text Registry</title>
    </head>
    <body style="font-family: 'Courier New', Courier, monospace">
        <h1>Спецификация языка Engine Text Registry</h1>
        <i>
            Данная спецификация поставляется вместе с Engine Runtime для ознакомления со стандартами особых форматов, в нём используемых.
            Спецификация не предназначена для самостоятельной разработки кодирующего/декодирующего ПО,
            Engine Software не несёт никакой ответственности за последствия такого рода самодеятельности.<br>
            Copyright &COPY; Engine Software, Емельянов Д. П. 2016-2018.<br><br>
        </i>
        Язык предназначен для текстовой записи реестров. Запись реестра осуществляется в алфавите Unicode в кодировке UTF-8, UTF16-LE или UTF32-LE.<br>
        Рекомендуемое расширешие для хранения текста в файле: .ini или .eini. В начале файла необходима сигнатура используемой кодировки.
        <h2>Лексика языка</h2>
        <h3>Строки и комментарии</h3>
        При прочтении слева начало строки обозначается символом '"'. Далее, все символы интерпретируются как внутренние знаки строки, за исключением:<br>
        Строка должна завершиться до конца текста.<br>
        Символ перевода строки недопускается внутри строки.<br>
        Символ '\' не входит в строку и модифицирует интерпретацию следующего символа (символов):<br>
        '\\' -> '\'<br>
        '\"' -> '"'<br>
        '\'' -> '''<br>
        '\?' -> '?'<br>
        '\a' -> символ звукового сигнала<br>
        '\b' -> символ возврата назад<br>
        '\f' -> символ новой страницы<br>
        '\n' -> символ новой строки<br>
        '\r' -> символ возврата каретки<br>
        '\t' -> символ табуляции<br>
        '\v' -> символ вертикальной табуляции<br>
        '\OOO' -> символ с восьмеричным кодом OOO (от 1 до 3 восьмеричных цифр).<br>
        '\xXXXXXXXX' -> символ с шестнадцатеричным кодом XXXXXXXX (от 1 до 8 цифр).<br>
        Регистр специальных последовательностей не имеет значения.<br>
        Символ '"' обозначает конец строки и в строку не входит.<br><br>
        Набор символов '//' обозначает комментарий в конце строки. Всё, начиная с этой пары и до конца строки, объявляется комментарием и никак не интерпретируется.<br>
        Текст от '/*' и до '*/' считается многострочным комментарием и так же не интерпретируется.
        Данные пары внутри строки интерпретируются как часть строки, а не как управляющие символы комментариев.
        <h3>Лексический разбор</h3>
        Выделим строки и удалим комментарии. Текст реестра представляет из себя последовательность слов, называемых лексемами.
        Разделителями текста на лексемы считаются символы пробела, перевода строки, табуляции, а также '{', '}', '=', '-'.
        Помимо разделителей, символы '{', '}', '=', '-' сами являются лексемами.<br><br>

        Ключевыми словами называются следующие лексемы: 'long', 'color', 'time', 'binary'.<br><br>

        Логическими константами называются лексемы 'true' и 'false'.<br><br>

        Числовой константой называется лексема, начинающаяся с '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' и содержащая цифры, латинские буквы и символ '.', а также
        лексемы 'float_infinity' и 'float_nan'.<br>
        Числовая константа, не содержащая букв и содержащая ровно одну '.' или лексема 'float_infinity' и 'float_nan' называется вещественной.<br>
        Числовая константа, не содержащая '.' называется целочисленной. Если целочисленная константа содержит только цифры, то она интерпретируется как десятичное число.
        Если целочисленная константа начинается с '0x', то остальная часть лексемы интерпретируется как шестнадцатеричное число.
        Если целочисленная константа начинается с '0o', то остальная часть лексемы интерпретируется как восьмеричное число.
        Если целочисленная константа начинается с '0b', то остальная часть лексемы интерпретируется как двоичное число.<br><br>

        Ранее оговорённые строки называются строковыми константами.<br><br>

        Лексемы, начинающаяся с латинской буквы или '_' и содержащие толко '_', латинские буквы и цифры, и не попадающие под ранее данные определения, называются идентификатором.
        <h2>Грамматика языка</h2>
        С использованием расширенных формул Бэкуса - Наура.<br>
        <b>РЕЕСТР</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= ТЕЛО_УЗЛА<br>
        <b>ТЕЛО_УЗЛА</b>&nbsp;&nbsp;&nbsp;::= { ОПРЕДЕЛЕНИЕ }<br>
        <b>ОПРЕДЕЛЕНИЕ</b>&nbsp;::= ОПР_УЗЛА | ОПР_ЦЕЛ | ОПР_ВЕЩ | ОПР_ЛОГ | ОПР_СТР | ОПР_ДЦЕЛ | ОПР_ДВЕЩ | ОПР_ЦВЕТ | ОПР_ВРЕМ | ОПР_ДВО<br>
        <b>ОПР_УЗЛА</b>&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '{' ТЕЛО_УЗЛА '}'<br>
        <b>ОПР_ЦЕЛ</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' [ '-' ] целое_число<br>
        <b>ОПР_ВЕЩ</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' [ '-' ] вещественное_число<br>
        <b>ОПР_ЛОГ</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' логическое_значение<br>
        <b>ОПР_СТР</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' строковая_константа<br>
        <b>ОПР_ДЦЕЛ</b>&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' 'long' [ '-' ] целое_число<br>
        <b>ОПР_ДВЕЩ</b>&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' 'long' [ '-' ] вещественное_число<br>
        <b>ОПР_ЦВЕТ</b>&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' 'color' целое_число<br>
        <b>ОПР_ВРЕМ</b>&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' 'time' '{' { целое_число } '}'<br>
        <b>ОПР_ДВО</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= ИМЯ '=' 'binary' '{' { целое_число } '}'<br>
        <b>ИМЯ</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= идентификатор | любое_ключевое_слово | любая_константа<br>
        <h2>Семантика языка</h2>
        Всякое определение создаёт в текущем узле подузел или новое значение соответствующего типа.<br>
        Если сущность с указанным именем уже определена, то происходит слияние для узлов и переопределение значения без смены типа для значений.<br>
        В определении целочисленной, цветовой и временной величины целое число должно принадлежать отрезку [0, 4294967295].<br>
        В определении длинной целочисленной величины целое число должно принадлежать отрезку [0, 18446744073709551615].<br>
        В определении двоичной величины целое число должно принадлежать отрезку [0, 255].<br>
        В определении временной величины количество повторов должно принадлежать отрезку [1, 7].
        Величины идут в порядке уменьшения их веса: год, месяц, день, час, минута, секунда, миллисекунда. Если величин меньше 7, то отбрасываются (считаются 0) первые величины.<br>
        В определении двоичной величины величины (байты) идут в порядке увеличения адреса.
    </body>
</html>